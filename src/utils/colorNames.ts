// Simple color naming utility based on ntc.js color matching
// A lightweight implementation that doesn't require CommonJS

// Basic color name database (subset of ntc.js colors for common colors)
const COLOR_NAMES: [string, string][] = [
    ["000000", "Black"],
    ["000080", "Navy Blue"],
    ["0000C8", "Dark Blue"],
    ["0000FF", "Blue"],
    ["000741", "Stratos"],
    ["001B1C", "Swamp"],
    ["002387", "Resolution Blue"],
    ["002900", "Deep Fir"],
    ["002E20", "Burnham"],
    ["002FA7", "International Klein Blue"],
    ["003153", "Prussian Blue"],
    ["003366", "Midnight Blue"],
    ["003399", "Smalt"],
    ["003532", "Deep Teal"],
    ["003E40", "Cyprus"],
    ["004620", "Kaitoke Green"],
    ["0047AB", "Cobalt"],
    ["004816", "Crusoe"],
    ["004950", "Sherpa Blue"],
    ["0056A7", "Endeavour"],
    ["00581A", "Camarone"],
    ["0066CC", "Science Blue"],
    ["0066FF", "Blue Ribbon"],
    ["00755E", "Tropical Rain Forest"],
    ["0076A3", "Allports"],
    ["007BA7", "Deep Cerulean"],
    ["007EC7", "Lochmara"],
    ["007FFF", "Azure Radiance"],
    ["008080", "Teal"],
    ["0095B6", "Bondi Blue"],
    ["009DC4", "Pacific Blue"],
    ["00A693", "Persian Green"],
    ["00A86B", "Jade"],
    ["00CC99", "Caribbean Green"],
    ["00CCCC", "Robin's Egg Blue"],
    ["00FF00", "Green"],
    ["00FF7F", "Spring Green"],
    ["00FFFF", "Cyan"],
    ["010D1A", "Blue Charcoal"],
    ["011635", "Midnight"],
    ["011D13", "Holly"],
    ["012731", "Daintree"],
    ["01361C", "Cardin Green"],
    ["01371A", "County Green"],
    ["013E62", "Astronaut Blue"],
    ["013F6A", "Regal Blue"],
    ["014B43", "Aqua Deep"],
    ["015E85", "Orient"],
    ["016162", "Blue Stone"],
    ["016D39", "Fun Green"],
    ["01796F", "Pine Green"],
    ["017987", "Blue Lagoon"],
    ["01826B", "Deep Sea"],
    ["01A368", "Green Haze"],
    ["022D15", "English Holly"],
    ["02402C", "Sherwood Green"],
    ["02478E", "Congress Blue"],
    ["024E46", "Evening Sea"],
    ["026395", "Bahama Blue"],
    ["02866F", "Observatory"],
    ["02A4D3", "Cerulean"],
    ["03163C", "Tangaroa"],
    ["032B52", "Green Vogue"],
    ["036A6E", "Mosque"],
    ["041004", "Midnight Moss"],
    ["041322", "Black Pearl"],
    ["042E4C", "Blue Whale"],
    ["044022", "Zuccini"],
    ["044259", "Teal Blue"],
    ["051040", "Deep Cove"],
    ["051657", "Gulf Blue"],
    ["055989", "Venice Blue"],
    ["056F57", "Watercourse"],
    ["062A78", "Catalina Blue"],
    ["063537", "Tiber"],
    ["069B81", "Gossamer"],
    ["06A189", "Niagara"],
    ["073A50", "Tarawera"],
    ["080110", "Jaguar"],
    ["081910", "Black Bean"],
    ["082567", "Deep Sapphire"],
    ["088370", "Elf Green"],
    ["08E8DE", "Bright Turquoise"],
    ["092256", "Downriver"],
    ["09230F", "Palm Green"],
    ["09255D", "Madison"],
    ["093624", "Bottle Green"],
    ["095859", "Deep Sea Green"],
    ["097F4B", "Salem"],
    ["0A001C", "Black Russian"],
    ["0A480D", "Dark Fern"],
    ["0A6906", "Japanese Laurel"],
    ["0A6F75", "Atoll"],
    ["0B0B0B", "Cod Gray"],
    ["0B0F08", "Marshland"],
    ["0B1107", "Gordons Green"],
    ["0B1304", "Black Forest"],
    ["0B6207", "San Felix"],
    ["0BDA51", "Malachite"],
    ["0C0B1D", "Ebony"],
    ["0C0D0F", "Woodsmoke"],
    ["0C1911", "Racing Green"],
    ["0C7A79", "Surfie Green"],
    ["0C8990", "Blue Chill"],
    ["0D0332", "Black Rock"],
    ["0D1117", "Bunker"],
    ["0D1C19", "Aztec"],
    ["0D2E1C", "Bush"],
    ["0E0E18", "Cinder"],
    ["0E2A30", "Firefly"],
    ["0F2D9E", "Torea Bay"],
    ["0F6A79", "Vulcan"],
    ["10121D", "Green Waterloo"],
    ["101405", "Eden"],
    ["105852", "Arapawa"],
    ["110C6C", "Ultramarine"],
    ["120A8F", "Elephant"],
    ["123447", "Jewel"],
    ["126B40", "Diesel"],
    ["130000", "Asphalt"],
    ["130A06", "Blue Zodiac"],
    ["13264D", "Parsley"],
    ["1450AA", "Nero"],
    ["151F4C", "Tory Blue"],
    ["1560BD", "Bunting"],
    ["15736B", "Denim"],
    ["161928", "Genoa"],
    ["162A40", "Mirage"],
    ["163222", "Hunter Green"],
    ["1A1A68", "Big Stone"],
    ["1AB385", "Pine Cone"],
    ["1B0245", "Aquamarine"],
    ["1B1035", "Fern Green"],
    ["1B127B", "Tower Gray"],
    ["1B1F23", "Martinique"],
    ["1C1208", "Scarpa Flow"],
    ["1C1E13", "Rangoon Green"],
    ["1C39BB", "Karaka"],
    ["1D6142", "Persian Blue"],
    ["1E0F04", "Fun Forest"],
    ["1E1609", "Woodrush"],
    ["1E1708", "Black Rose"],
    ["1E385B", "Karry"],
    ["1E3A5F", "Midnight Blue"],
    ["1E433C", "Nile Blue"],
    ["1E90FF", "Dodger Blue"],
    ["1F120F", "Kelp"],
    ["1FC2C2", "Burnished Brown"],
    ["20208D", "Robin's Egg Blue"],
    ["202E54", "Jacko Bean"],
    ["204852", "Blue Dianne"],
    ["211A0E", "Mosque Blue"],
    ["220878", "Jacarta"],
    ["228B22", "Forest Green"],
    ["233418", "Log Cabin"],
    ["240A40", "Black Marlin"],
    ["242A1D", "Blue Moon"],
    ["242E16", "Rangitoto"],
    ["243A73", "Bay of Many"],
    ["24500F", "Tangaroa Blue"],
    ["251607", "Blue Chalk"],
    ["251706", "Black Russian"],
    ["25311C", "Sea Green"],
    ["2596D1", "Picton Blue"],
    ["26056A", "Blue Ribbon"],
    ["261105", "Purple Heart"],
    ["2D383A", "Ebony Clay"],
    ["2D5A7C", "Steel Blue"],
    ["2E0329", "Delta"],
    ["2E1905", "Pale Sky"],
    ["2E3222", "White Rock"],
    ["2E3F62", "Gray Wolf"],
    ["2E8B57", "Sea Green"],
    ["2F270E", "Sprout"],
    ["2F3CB3", "Armadillo"],
    ["2F519E", "St Tropaz"],
    ["2F5A57", "Como"],
    ["2F6168", "William"],
    ["2FA13B", "Orient Pearl"],
    ["303030", "Night Rider"],
    ["32127A", "Persian Indigo"],
    ["32174D", "Russian Violet"],
    ["32CD32", "Lime Green"],
    ["336699", "Steel Blue"],
    ["339933", "Grass Green"],
    ["33CC99", "Shamrock"],
    ["3D7A9C", "Wedgewood"],
    ["40826D", "Viridian"],
    ["4169E1", "Royal Blue"],
    ["4682B4", "Steel Blue"],
    ["483C32", "Taupe"],
    ["4B0082", "Indigo"],
    ["4D9ABC", "Boston Blue"],
    ["5218FA", "Blue Violet"],
    ["556B2F", "Dark Olive Green"],
    ["5F9EA0", "Cadet Blue"],
    ["6495ED", "Cornflower Blue"],
    ["663399", "Rebecca Purple"],
    ["66CDAA", "Medium Aquamarine"],
    ["696969", "Dim Gray"],
    ["708090", "Slate Gray"],
    ["778899", "Light Slate Gray"],
    ["7B68EE", "Medium Slate Blue"],
    ["7CFC00", "Lawn Green"],
    ["7FFF00", "Chartreuse"],
    ["7FFFD4", "Aquamarine"],
    ["800000", "Maroon"],
    ["800080", "Purple"],
    ["808000", "Olive"],
    ["808080", "Gray"],
    ["87CEEB", "Sky Blue"],
    ["87CEFA", "Light Sky Blue"],
    ["8A2BE2", "Blue Violet"],
    ["8B0000", "Dark Red"],
    ["8B008B", "Dark Magenta"],
    ["8B4513", "Saddle Brown"],
    ["8FBC8F", "Dark Sea Green"],
    ["90EE90", "Light Green"],
    ["9370DB", "Medium Purple"],
    ["9400D3", "Dark Violet"],
    ["98FB98", "Pale Green"],
    ["9932CC", "Dark Orchid"],
    ["9ACD32", "Yellow Green"],
    ["A020F0", "Purple"],
    ["A0522D", "Sienna"],
    ["A52A2A", "Brown"],
    ["A9A9A9", "Dark Gray"],
    ["ADD8E6", "Light Blue"],
    ["ADFF2F", "Green Yellow"],
    ["AFEEEE", "Pale Turquoise"],
    ["B0C4DE", "Light Steel Blue"],
    ["B0E0E6", "Powder Blue"],
    ["B22222", "Fire Brick"],
    ["B8860B", "Dark Goldenrod"],
    ["BA55D3", "Medium Orchid"],
    ["BC8F8F", "Rosy Brown"],
    ["BDB76B", "Dark Khaki"],
    ["C0C0C0", "Silver"],
    ["C71585", "Medium Violet Red"],
    ["CD5C5C", "Indian Red"],
    ["CD853F", "Peru"],
    ["D2691E", "Chocolate"],
    ["D2B48C", "Tan"],
    ["D3D3D3", "Light Gray"],
    ["D8BFD8", "Thistle"],
    ["DA70D6", "Orchid"],
    ["DAA520", "Goldenrod"],
    ["DB7093", "Pale Violet Red"],
    ["DC143C", "Crimson"],
    ["DCDCDC", "Gainsboro"],
    ["DDA0DD", "Plum"],
    ["DEB887", "Burlywood"],
    ["E0FFFF", "Light Cyan"],
    ["E6E6FA", "Lavender"],
    ["E9967A", "Dark Salmon"],
    ["EE82EE", "Violet"],
    ["EEE8AA", "Pale Goldenrod"],
    ["F08080", "Light Coral"],
    ["F0E68C", "Khaki"],
    ["F0F8FF", "Alice Blue"],
    ["F0FFF0", "Honeydew"],
    ["F0FFFF", "Azure"],
    ["F4A460", "Sandy Brown"],
    ["F5DEB3", "Wheat"],
    ["F5F5DC", "Beige"],
    ["F5F5F5", "White Smoke"],
    ["F5FFFA", "Mint Cream"],
    ["F8F8FF", "Ghost White"],
    ["FA8072", "Salmon"],
    ["FAEBD7", "Antique White"],
    ["FAF0E6", "Linen"],
    ["FAFAD2", "Light Goldenrod Yellow"],
    ["FDF5E6", "Old Lace"],
    ["FF0000", "Red"],
    ["FF00FF", "Magenta"],
    ["FF1493", "Deep Pink"],
    ["FF4500", "Orange Red"],
    ["FF6347", "Tomato"],
    ["FF69B4", "Hot Pink"],
    ["FF7F50", "Coral"],
    ["FF8C00", "Dark Orange"],
    ["FFA07A", "Light Salmon"],
    ["FFA500", "Orange"],
    ["FFB6C1", "Light Pink"],
    ["FFC0CB", "Pink"],
    ["FFD700", "Gold"],
    ["FFDAB9", "Peach Puff"],
    ["FFDEAD", "Navajo White"],
    ["FFE4B5", "Moccasin"],
    ["FFE4C4", "Bisque"],
    ["FFE4E1", "Misty Rose"],
    ["FFEBCD", "Blanched Almond"],
    ["FFEFD5", "Papaya Whip"],
    ["FFF0F5", "Lavender Blush"],
    ["FFF5EE", "Seashell"],
    ["FFF8DC", "Cornsilk"],
    ["FFFACD", "Lemon Chiffon"],
    ["FFFAF0", "Floral White"],
    ["FFFAFA", "Snow"],
    ["FFFF00", "Yellow"],
    ["FFFFE0", "Light Yellow"],
    ["FFFFF0", "Ivory"],
    ["FFFFFF", "White"],
];

// Convert hex to RGB
function hexToRgb(hex: string): [number, number, number] {
    const cleanHex = hex.replace('#', '').toUpperCase();
    const r = parseInt(cleanHex.substring(0, 2), 16);
    const g = parseInt(cleanHex.substring(2, 4), 16);
    const b = parseInt(cleanHex.substring(4, 6), 16);
    return [r, g, b];
}

// Calculate color distance
function colorDistance(rgb1: [number, number, number], rgb2: [number, number, number]): number {
    return Math.sqrt(
        Math.pow(rgb1[0] - rgb2[0], 2) +
        Math.pow(rgb1[1] - rgb2[1], 2) +
        Math.pow(rgb1[2] - rgb2[2], 2)
    );
}

/**
 * Get the closest color name for a hex color
 * @param hex - Hex color code (with or without #)
 * @returns The color name
 */
export function getColorName(hex: string): string {
    const targetRgb = hexToRgb(hex);

    let closestName = "Unknown";
    let closestDistance = Infinity;

    for (const [colorHex, name] of COLOR_NAMES) {
        const rgb = hexToRgb(colorHex);
        const distance = colorDistance(targetRgb, rgb);

        if (distance < closestDistance) {
            closestDistance = distance;
            closestName = name;
        }

        // Exact match
        if (distance === 0) break;
    }

    return closestName;
}

/**
 * Get color names for an array of hex colors
 * @param hexColors - Array of hex color codes
 * @returns Array of color names
 */
export function getColorNames(hexColors: string[]): string[] {
    return hexColors.map(getColorName);
}
